<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>mysql_4 数据控制语言控制 | The Old Man and the Sea</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="注：本文主要参考http://szysky.com  数据控制语言 DCL (Data Control Language)数据控制语言,是用于对mysql的用户及其权限进行管理的语句. 用户管理 mysql中的所有用户,都存在系统数据库(mysql)中的 user 表中–不敢那个数据库的用户,都存储在这里.(服务器: localhost--&amp;gt;数据库: mysql--&amp;gt; 表 user)">
<meta name="keywords" content="mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql_4 数据控制语言控制">
<meta property="og:url" content="http://yoursite.com/2017/09/08/mysql/mysql_4 数据控制语言控制/index.html">
<meta property="og:site_name" content="The Old Man and the Sea">
<meta property="og:description" content="注：本文主要参考http://szysky.com  数据控制语言 DCL (Data Control Language)数据控制语言,是用于对mysql的用户及其权限进行管理的语句. 用户管理 mysql中的所有用户,都存在系统数据库(mysql)中的 user 表中–不敢那个数据库的用户,都存储在这里.(服务器: localhost--&amp;gt;数据库: mysql--&amp;gt; 表 user)">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-09-08T09:13:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mysql_4 数据控制语言控制">
<meta name="twitter:description" content="注：本文主要参考http://szysky.com  数据控制语言 DCL (Data Control Language)数据控制语言,是用于对mysql的用户及其权限进行管理的语句. 用户管理 mysql中的所有用户,都存在系统数据库(mysql)中的 user 表中–不敢那个数据库的用户,都存储在这里.(服务器: localhost--&amp;gt;数据库: mysql--&amp;gt; 表 user)">
    

    
        <link rel="alternate" href="/" title="The Old Man and the Sea" type="application/atom+xml" />
    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">The Old Man and the Sea</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
                    <a class="main-nav-link" href="https://ernestchang.github.io/2017/08/23/other/about/">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/uploads/images/avert.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                    <td><a class="main-nav-link" href="https://ernestchang.github.io/2017/08/23/other/about/">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/uploads/images/avert.png" />
            <h2 id="name">Ernest Chang</h2>
            <h3 id="title">Developer &amp; Designer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Hangzhou, China</span>
            <a id="follow" target="_blank" href="https://github.com/Ernestchang/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                48
                <span>posts</span>
            </div>
            <div class="article-info-block">
                15
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/Ernestchang/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="twitter" class=tooltip>
                            <i class="fa fa-twitter"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="dribbble" class=tooltip>
                            <i class="fa fa-dribbble"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="rss" class=tooltip>
                            <i class="fa fa-rss"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-mysql/mysql_4 数据控制语言控制" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            mysql_4 数据控制语言控制
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/09/08/mysql/mysql_4 数据控制语言控制/">
            <time datetime="2017-09-08T09:10:54.000Z" itemprop="datePublished">2017-09-08</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/mysql/">mysql</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/mysql/">mysql</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <blockquote>
<p>注：本文主要参考<a href="http://szysky.com" target="_blank" rel="external">http://szysky.com</a></p>
</blockquote>
<h3 id="数据控制语言-DCL-Data-Control-Language"><a href="#数据控制语言-DCL-Data-Control-Language" class="headerlink" title="数据控制语言 DCL (Data Control Language)"></a>数据控制语言 DCL (Data Control Language)</h3><p>数据控制语言,是用于对<code>mysql</code>的用户及其权限进行管理的语句.</p>
<p><strong>用户管理</strong></p>
<p>mysql中的所有用户,都存在系统数据库(mysql)中的 <code>user</code> 表中–不敢那个数据库的用户,都存储在这里.<code>(服务器: localhost--&gt;数据库: mysql--&gt; 表 user)</code></p>
<p><strong>创建用户</strong></p>
<p>形式: <code>create user &#39;用户名&#39;@&#39;允许登录的地址/服务器&#39; identified by &#39;密码&#39;</code></p>
<p>如果想创建一个指定的 <code>ip</code> 用户想访问我们本地的数据库这样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">create user &apos;extra&apos;@&apos;192.168.x.x&apos; identified by &apos;123&apos;;    //这样就创建了一个 extra 的用户  对方访问可以这样&lt;br/&gt;</div><div class="line">mysql -h我的主机名 -uextra -p;</div></pre></td></tr></table></figure>
<p><strong>删除用户</strong></p>
<p><code>drop user &#39;用户名&#39;@&#39;允许登录的地址或服务器&#39;</code></p>
<p><strong>修改用户密码</strong></p>
<p><code>set password = password(&#39;密码&#39;);</code></p>
<p><code>setpassword for &#39;用户名&#39;@&#39;允许登录的地址&#39; = password(&#39;密码&#39;);</code></p>
<h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><p><code>mysql</code> 数据库,将其中所能做的所有事情否分门别类分配到大约30多个权限中去了,其中每个权限,都是一个单词而已.</p>
<ul>
<li><code>select</code>: 代表可以查询数据;</li>
<li><code>update</code>: 代表可以修改数据;</li>
<li><code>delete</code>: 代表可以删除数据;</li>
<li>……</li>
</ul>
<p>其中有一个特别的权限 : <code>all</code> 设置出 <code>GRANT OPTION</code> 之外的所有简单权限.</p>
<p><strong>授予权限</strong></p>
<p>形式:</p>
<ul>
<li><code>grant 权限列表 on 某库.某对象 to &#39;用户名&#39;@&#39;允许登录的位置&#39; [identified by &#39;密码&#39;];</code></li>
</ul>
<p>说明:</p>
<ol>
<li>权限列表,就是多个权限的名字,相互之间用逗号分开,比如: <code>select,insert,update</code>, 也可以写 <code>all</code></li>
<li><code>某库.某对象</code>,表示给指定的某个数据库中的某个下级单位附权,下级单位有: 表名,视图名,存储过程名,存储函数名.其中可以使用统配语法–&gt;</li>
<li><code>\*.\*</code>: 代表所有的数据库的所有下级单位.</li>
<li>某库.*: 代表指定的该库中的所有下级单位</li>
</ol>
<p><strong>剥夺权限</strong></p>
<p>形式:</p>
<ul>
<li><code>revoke 权限列表 on 某库.某个对象 from &#39;用户名&#39;@&#39;允许登录的位置&#39;</code></li>
<li>其含义,跟 <code>grant</code> 完全一样;</li>
</ul>
<h3 id="数据事务语言-DDL-Data-Transaction-Language"><a href="#数据事务语言-DDL-Data-Transaction-Language" class="headerlink" title="数据事务语言 DDL (Data Transaction Language)"></a>数据事务语言 DDL (Data Transaction Language)</h3><p>就是用来保证多条增删改语句的执行的一致性,要么都执行,要么都没有执行.</p>
<p><strong>事务的特点</strong></p>
<ul>
<li>原子性: 一个事务总的所有语句,应该做到要么全做,要么一个都不做.</li>
<li>一致性: 让数据保持逻辑上的合理性,例如一个商品出库时,既要让商品库数量减1,又让让对应用户购物车商品加1.</li>
<li>隔离性: 如果多个事务同时并发执行,但每个事务就像各自独立执行一样.</li>
<li>持久性: 一个事务执行成功,则对数据来说应该死一个明确的硬盘数据更改,而不仅仅是内存中的变化.</li>
</ul>
<p><strong>事务模式</strong></p>
<p>在我们 <code>cmd</code> 命令模式中,是否开启了 一条语句就是一个事务 的这个开关.<br>默认情况下(安装后) ,这个模式是开启的,称为自动提交模式;我们可以手动把他关闭,那就是’非自动提交模式’</p>
<p><code>set autocommit = 0/false</code> //关闭该模式</p>
<p><strong>事务执行的基本流程</strong></p>
<ol>
<li><p>开启一个事务: <code>start transaction;</code> //也可以写成: <code>begin</code></p>
</li>
<li><p>执行多条增删改语句; //也就是相当于希望这多条语句作为一个不可分割的整体去执行.</p>
</li>
<li><p>判断这些语句执行的结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if(没有出错)&#123;</div><div class="line">    commit;        //提交事务;此时就是一次性完成;</div><div class="line">&#125; else&#123;</div><div class="line">    roolback;    //回滚事务;此时什么都没有做;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="mysql-编程"><a href="#mysql-编程" class="headerlink" title="mysql 编程"></a>mysql 编程</h3><p><strong>mysql 编程中语句块包含符</strong></p>
<p>就是相当于 <code>js</code> 或 <code>php</code> 中的大括号语法:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[标识符 :] begin</div><div class="line">    //语句...</div><div class="line">end;[标识符];</div></pre></td></tr></table></figure>
<p>标识符就是定义任意的名字而已,比如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">if(条件判断)    </div><div class="line">    begin</div><div class="line">        //.....</div><div class="line">    end;</div><div class="line">end if;</div><div class="line"></div><div class="line">if(条件判断)</div><div class="line">    A:begin</div><div class="line">        //...</div><div class="line">    end A;</div><div class="line">end if;</div><div class="line">A 就是标识符,它的租用是标识该语句块,以期可以在该语句块中使用它--其实就是退出.</div></pre></td></tr></table></figure>
<p><strong>流程控制语句</strong></p>
<p>1.<code>if</code> 语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">if 条件语句 then</div><div class="line">    begin</div><div class="line">        语句块</div><div class="line">    end;</div><div class="line"></div><div class="line">    elseif 条件语句 then </div><div class="line">    begin</div><div class="line">        语句块</div><div class="line">    end;</div><div class="line"></div><div class="line">    else</div><div class="line">    begin</div><div class="line">        else 语句块</div><div class="line">    end;</div><div class="line">end if;</div></pre></td></tr></table></figure>
<p>2.<code>case</code> 语句 相当于 <code>java</code> 的 <code>switch</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CASE case_value</div><div class="line"></div><div class="line">    WHEN when_value THEN statement_list</div><div class="line"></div><div class="line">    WHEN when_value1 THEN statement_list    //可以有很多 when 和 then 组合</div><div class="line">    ELSE statement_list</div><div class="line"></div><div class="line">END CASE</div></pre></td></tr></table></figure>
<p>语法 <code>case @v1 ... end case; //@v1表示一个变量;后面都这样</code></p>
<p><strong>3.loop 循环语句</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">标识符: loop</div><div class="line">begin</div><div class="line">    //这里就是循环的语句块</div><div class="line">    //注意这里必须要有一个退出循环的逻辑机制,否则该循环就是死循环,其基本形式类似这样</div><div class="line">        if(条件) then</div><div class="line">            leave 标识符;    //退出</div><div class="line">        end if;</div><div class="line">end;</div><div class="line">end loop 标识符;</div></pre></td></tr></table></figure>
<p><strong>4.while循环语句</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">set @v1&lt;10 do</div><div class="line">    begin</div><div class="line">        insert into tab1 (id,num) values(null, @v1);</div><div class="line">        set @v1 = @v1 + 1;</div><div class="line">    end;</div><div class="line">end while;</div></pre></td></tr></table></figure>
<p><strong>5.repeat语句</strong><br>类似于<code>dowhile</code>语句,但是这里条件为真就不执行,为假就继续执行.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">set @v1 = 1;    //赋值语句</div><div class="line">repeat</div><div class="line">    begin</div><div class="line">        insert into tab1 (id,num) values(null,@v1);</div><div class="line">        set @v1 = @v1+1;</div><div class="line">    end;</div><div class="line">    until @v1 &gt;= 9;</div><div class="line">end repeat;</div></pre></td></tr></table></figure>
<p><strong>leave语句</strong></p>
<p>语法: <code>leave</code> 标识符;</p>
<p>作用: 用来退出<code>begin...end</code>结构或其他具有标识符的结构.</p>
<p><strong>mysql中的变量</strong></p>
<p><code>mysql</code>中,有两种变量形式:</p>
<ul>
<li>普通变量: 不带 <code>@</code> 符号</li>
</ul>
<p>形式: <code>declare 变量名 类型名 [default 默认值]; //普通变量必须先这样定义</code></p>
<p>使用场景:只能在编程环境使用,有3个:1函数内部,存储过程内部,触发器的内部.</p>
<ul>
<li>会话变量: 带 <code>@</code> 符号</li>
</ul>
<p>形式: <code>set @变量名 = 值; //跟php类似,无需定义,直接赋值,第一次就算是定义</code></p>
<p>使用场景: 任何场景.</p>
<p><strong>变量赋值</strong></p>
<ol>
<li><code>set 变量名 = 表达式;</code> #此语法中的变量必须先使用declare声明.</li>
<li><code>set @变量名 = 表达式;</code> #此方式可以无需<code>declare</code>语法声明,而是直接赋值,类似<code>php</code>定义变量并赋值.</li>
<li><code>select @变量名:=表达式;</code> #此语句会给该变量赋值,同时还会作为一个<code>select</code>语句输出结果集.</li>
<li><code>select 表达式 into @变量名;</code>#此语句虽然看起来是<code>select</code>语句,但其实并不输出结果集,而只是给变量赋值.</li>
</ol>
<p><strong>(存储)函数</strong></p>
<p>函数,也说成存储函数,其实就是<code>js</code>和<code>php</code>中所说的函数.</p>
<p>注意:</p>
<ol>
<li>在函数内部,可以有各种变量和流程控制的的使用.</li>
<li>在函数内部,也可以有各种增删改语句.</li>
<li>在函数内部,不可以用<code>select</code>或其他返回结果集的查询类语句.</li>
</ol>
<p>唯一的区别:</p>
<ul>
<li>这里的函数必须返回一个数据(值);</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//创建一个函数</div><div class="line">create function getMaxValue(p1 float, p2 float, p3 float)</div><div class="line">returns float;    #返回float类型</div><div class="line">begin</div><div class="line">    .... # 要执行的内容</div><div class="line">end;</div></pre></td></tr></table></figure>
<p>上处代码直接在命令行执行可能会有error,因为代码中包含; 会提前结束没有完成的语句.解决方案可以通过修改’语句结束符’. <code>delimiter ///</code></p>
<p><strong>删除函数</strong></p>
<p><code>drop function</code></p>
<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><p>存储过程,其实还是函数 – 但其规定: 不能有返回值.</p>
<p>创建一个存储过程</p>
<p>效果目标: 将3个数据写入到表<code>tab_int</code></p>
<p>并返回该表的第一个字段的前3大值得行.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">create procedure insert_get_date(p1 int, p2 tinyint, p3 bigint)</div><div class="line">begin</div><div class="line">    insert into tab_int(f1,f2,f3) values(p1,p2,p3);</div><div class="line">    select * from tab_int order by table_int.f1 desc limit 0,3;</div><div class="line">end;</div></pre></td></tr></table></figure>
<p>调用存储过程:</p>
<ul>
<li><code>call</code> 存储过程名(实参1, 实参2, …)</li>
<li>它应该是在非编程环境中调用,既执行增删改查的场景.</li>
</ul>
<p><strong>删除存储过程</strong></p>
<p><code>drop procedure 存储过程名;</code></p>
<h3 id="触发器-trigger"><a href="#触发器-trigger" class="headerlink" title="触发器 trigger"></a>触发器 trigger</h3><p>触发器,也是一段预先定义好的编程代码(跟存储过程和存储函数一样),并有个名字.</p>
<p>它不能调用,而是,在某个表发生某个事件(增,删,改)的时候,会自动触发而调用起来.</p>
<p>定义形式:</p>
<ul>
<li><code>create trigger 触发器名 触发时机 触发事件 on 表名 for each row</code></li>
</ul>
<p>begin //…. end;</p>
<p>说明:</p>
<ol>
<li>触发时机,只有两个: <code>before</code>(在…之前), <code>after</code>(在…之后);</li>
<li>触发事件,只有三个: <code>insert</code>, <code>update</code>, <code>delete</code></li>
<li>既触发器的含义是: 在某个表上进行<code>insert</code>(或<code>update</code>或<code>delete</code>)之前,或之后.</li>
<li>通常,触发器用于在对某个表进行增删改的操作的时候,需要同时去做另外一件事的时候;</li>
<li>在触发器的内部,有两个关键字代表某种特定的含义,可以用来获取数据<br><code>new</code>:它代表当前正要执行的<code>insert</code>或<code>update</code>的时候’新行’数据;通过他,可以获取这一新行数据的任意一个字段形式为: <code>set @v1 = new.id;</code> //获得该新插入或update行的id的值(前提是有该id).</li>
<li><code>old</code>:它代表当前正要执行的delete的时候’旧行’数据;通过他,可以获取这一旧行数据的任意一个字段形式为: <code>set @v1 = new.id;</code> //获得该新插入或<code>update</code>行的<code>id</code>的值(前提是有该id).</li>
</ol>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2017/09/08/mysql/mysql_4 数据控制语言控制/" data-id="cj7bo43qz0001v5pjyl3gnqwh" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://yoursite.com/2017/09/08/mysql/mysql_4 数据控制语言控制/#comments" class="article-comment-link">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/2017/09/08/mysql/mysql_3 子查询/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">mysql_3 子查询</div>
        </a>
    
</nav>


    
</article>


    
    
        <section id="comments">
    <div id="uyan_frame"></div>
</section>
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/mysql/">mysql</a></p>
                            <p class="item-title"><a href="/2017/09/08/mysql/mysql_4 数据控制语言控制/" class="title">mysql_4 数据控制语言控制</a></p>
                            <p class="item-date"><time datetime="2017-09-08T09:10:54.000Z" itemprop="datePublished">2017-09-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/mysql/">mysql</a></p>
                            <p class="item-title"><a href="/2017/09/08/mysql/mysql_3 子查询/" class="title">mysql_3 子查询</a></p>
                            <p class="item-date"><time datetime="2017-09-08T09:10:17.000Z" itemprop="datePublished">2017-09-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/mysql/">mysql</a></p>
                            <p class="item-title"><a href="/2017/09/08/mysql/mysql_2 基本查询语句/" class="title">mysql_2 基本查询语句</a></p>
                            <p class="item-date"><time datetime="2017-09-08T09:09:49.000Z" itemprop="datePublished">2017-09-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/mysql/">mysql</a></p>
                            <p class="item-title"><a href="/2017/09/08/mysql/mysql_1 数据库入门/" class="title">mysql_1 数据库入门</a></p>
                            <p class="item-date"><time datetime="2017-09-08T09:08:51.000Z" itemprop="datePublished">2017-09-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/09/08/life/买车注意事项/" class="title"></a></p>
                            <p class="item-date"><time datetime="2017-09-08T02:51:21.000Z" itemprop="datePublished">2017-09-08</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/android/code/">code</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/github/">github</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/《Android开发艺术探索》/">《Android开发艺术探索》</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/《Android编程权威指南》/">《Android编程权威指南》</a><span class="category-list-count">4</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/learn/">learn</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/learn/《如何高效学习》/">《如何高效学习》</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/vim/">vim</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/markdown/">markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/node/">node</a><span class="category-list-count">7</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/node/7days/">7days</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">27</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">7</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/analysis/">analysis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">24</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anslysis/">anslysis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/autoLink/">autoLink</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/code/">code</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/indicator/">indicator</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/learn/">learn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textview/">textview</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/analysis/" style="font-size: 10px;">analysis</a> <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/anslysis/" style="font-size: 10px;">anslysis</a> <a href="/tags/autoLink/" style="font-size: 10px;">autoLink</a> <a href="/tags/code/" style="font-size: 14px;">code</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 12px;">github</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/indicator/" style="font-size: 10px;">indicator</a> <a href="/tags/learn/" style="font-size: 10px;">learn</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mysql/" style="font-size: 16px;">mysql</a> <a href="/tags/node/" style="font-size: 18px;">node</a> <a href="/tags/textview/" style="font-size: 10px;">textview</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Ernest Chang<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2142274"></script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>